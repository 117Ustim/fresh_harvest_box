# üìù –®–ü–ê–†–ì–ê–õ–ö–ê: –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏

–ö—Ä–∞—Ç–∫–∞—è –≤–µ—Ä—Å–∏—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —É–∂–µ –∑–Ω–∞–∫–æ–º —Å –ø—Ä–æ—Ü–µ—Å—Å–æ–º.

---

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ (15 –º–∏–Ω—É—Ç)

### 1. –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø–∞–ø–∫—É –≤ –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç
cp -r universal-admin-package /–ø—É—Ç—å/–∫/–Ω–æ–≤–æ–º—É/–ø—Ä–æ–µ–∫—Ç—É/
```

---

### 2. –°–æ–∑–¥–∞–π—Ç–µ lib/admin-adapters.js

```javascript
import { FirebaseAdapter, CloudinaryAdapter } from '../universal-admin-package/src/index.js';

export const firebaseAdapter = new FirebaseAdapter({
  apiKey: "–í–ê–®_API_KEY",
  authDomain: "–í–ê–®_AUTH_DOMAIN",
  projectId: "–í–ê–®_PROJECT_ID",
  storageBucket: "–í–ê–®_STORAGE_BUCKET",
  messagingSenderId: "–í–ê–®_MESSAGING_SENDER_ID",
  appId: "–í–ê–®_APP_ID"
});

export const cloudinaryAdapter = new CloudinaryAdapter({
  cloudName: '–í–ê–®_CLOUD_NAME',
  uploadPreset: '–í–ê–®_UPLOAD_PRESET'
});
```

---

### 3. –°–æ–∑–¥–∞–π—Ç–µ database.example.js

```javascript
export const siteData = {
  home: {
    hero: {
      title: "–ó–∞–≥–æ–ª–æ–≤–æ–∫",
      subtitle: "–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫",
      description: "–û–ø–∏—Å–∞–Ω–∏–µ"
    },
    gallery: {
      title: "–ì–∞–ª–µ—Ä–µ—è",
      images: []
    }
  }
};

export default siteData;
```

---

### 4. –°–æ–∑–¥–∞–π—Ç–µ site.config.js

```javascript
export const siteConfig = {
  collections: {
    pages: {}
  }
};

export default siteConfig;
```

---

### 5. –û–±–Ω–æ–≤–∏—Ç–µ app/layout.js

```javascript
import { AdminProvider } from '../universal-admin-package/src/index.js';
import { firebaseAdapter, cloudinaryAdapter } from '../lib/admin-adapters.js';
import { siteConfig } from '../site.config.js';

export default function RootLayout({ children }) {
  return (
    <html lang="ru">
      <body>
        <AdminProvider 
          config={siteConfig}
          database={firebaseAdapter}
          storage={cloudinaryAdapter}
        >
          {children}
        </AdminProvider>
      </body>
    </html>
  );
}
```

---

### 6. –û–±–Ω–æ–≤–∏—Ç–µ app/page.js

```javascript
'use client';

import { AdminPanel, useContent } from '../universal-admin-package/src/index.js';

function HomeContent() {
  const hero = useContent('pages.home.hero');
  
  if (!hero) return <div>–ó–∞–≥—Ä—É–∑–∫–∞...</div>;
  
  return (
    <div style={{ padding: '50px' }}>
      <h1>{hero.title}</h1>
      <p>{hero.description}</p>
    </div>
  );
}

export default function Home() {
  return (
    <main>
      <AdminPanel theme={{ primaryColor: '#1976D2' }} />
      <HomeContent />
    </main>
  );
}
```

---

### 7. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç

```bash
npm run dev
```

–û—Ç–∫—Ä–æ–π—Ç–µ: http://localhost:3000

–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∫–∏: `admin123`

---

## üîë –ì–¥–µ –≤–∑—è—Ç—å –∫–ª—é—á–∏

### Firebase:
1. https://console.firebase.google.com/
2. –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç ‚Üí Firestore Database ‚Üí Settings ‚Üí Your apps ‚Üí Web app
3. –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å firebaseConfig

### Cloudinary:
1. https://cloudinary.com/
2. Dashboard ‚Üí Cloud Name
3. Settings ‚Üí Upload ‚Üí Add upload preset (Unsigned)

---

## üé® –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ

```javascript
const hero = useContent('pages.home.hero');
const title = useContent('pages.home.hero.title');
```

### –° –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º

```javascript
const title = useContent('pages.home.hero.title', {
  defaultValue: '–ó–∞–≥–æ–ª–æ–≤–æ–∫'
});
```

### –ú–∞—Å—Å–∏–≤—ã

```javascript
const gallery = useContent('pages.home.gallery');

{gallery?.images?.map((img, i) => (
  <img key={i} src={img} alt="" />
))}
```

---

## üåê –°–µ—Ä–≤–µ—Ä–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç (–¥–ª—è SEO)

### lib/getFirebaseData.js

```javascript
import { initializeApp, getApps } from 'firebase/app';
import { getFirestore, doc, getDoc } from 'firebase/firestore';

const firebaseConfig = { /* –≤–∞—à–∏ –∫–ª—é—á–∏ */ };
const app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];
const db = getFirestore(app);

export async function getPageData(pageId) {
  const docRef = doc(db, 'pages', pageId);
  const docSnap = await getDoc(docRef);
  return docSnap.exists() ? docSnap.data() : null;
}
```

### app/page.js (—Å–µ—Ä–≤–µ—Ä–Ω—ã–π)

```javascript
import { getPageData } from '../lib/getFirebaseData.js';
import HomeClient from './HomeClient.js';

export default async function HomePage() {
  const pageData = await getPageData('home');
  return <HomeClient initialData={pageData || {}} />;
}

export async function generateMetadata() {
  const pageData = await getPageData('home');
  return {
    title: pageData?.hero?.title || '–ì–ª–∞–≤–Ω–∞—è',
    description: pageData?.hero?.description || '–û–ø–∏—Å–∞–Ω–∏–µ',
  };
}
```

### app/HomeClient.js (–∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π)

```javascript
'use client';

import { AdminPanel } from '../universal-admin-package/src/index.js';

export default function HomeClient({ initialData }) {
  const { hero } = initialData;
  
  return (
    <main>
      <AdminPanel />
      <h1>{hero?.title}</h1>
    </main>
  );
}
```

---

## üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### Firebase not initialized
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–ª—é—á–∏ –≤ lib/admin-adapters.js

### Cloudinary upload failed
‚Üí Upload Preset –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å "Unsigned"

### –î–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
‚Üí –û—á–∏—Å—Ç–∏—Ç–µ localStorage:
```javascript
localStorage.removeItem('auto_import_completed');
location.reload();
```

### –ö–Ω–æ–ø–∫–∞ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –¥–æ–±–∞–≤–∏–ª–∏ `<AdminPanel />`

---

## üéØ –¢–∏–ø—ã –ø–æ–ª–µ–π

| –¢–∏–ø | –ü—Ä–∏–º–µ—Ä –≤ database.example.js |
|-----|------------------------------|
| text | `title: "–¢–µ–∫—Å—Ç"` |
| textarea | `description: "–î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç..."` |
| image | `logo: "/logo.png"` |
| image-array | `images: ["/1.jpg", "/2.jpg"]` |
| repeater | `items: [{ title: "...", description: "..." }]` |

---

## üîß –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ó–∞–ø—É—Å–∫
npm run dev

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
Ctrl+C

# –û—á–∏—Å—Ç–∫–∞ –∫—ç—à–∞
npm run build
rm -rf .next

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
rm -rf node_modules
npm install
```

---

## üìû –°—Å—ã–ª–∫–∏

- Firebase Console: https://console.firebase.google.com/
- Cloudinary Dashboard: https://cloudinary.com/console
- –ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è: [–ù–ê–ß–ù–ò–¢–ï_–ó–î–ï–°–¨.md](./–ù–ê–ß–ù–ò–¢–ï_–ó–î–ï–°–¨.md)
- –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º: [–ò–ù–°–¢–†–£–ö–¶–ò–Ø_9_–ü–†–û–ë–õ–ï–ú–´.md](./–ò–ù–°–¢–†–£–ö–¶–ò–Ø_9_–ü–†–û–ë–õ–ï–ú–´.md)

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

- [ ] universal-admin-package —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞
- [ ] lib/admin-adapters.js —Å–æ–∑–¥–∞–Ω
- [ ] database.example.js —Å–æ–∑–¥–∞–Ω
- [ ] site.config.js —Å–æ–∑–¥–∞–Ω
- [ ] app/layout.js –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] app/page.js –æ–±–Ω–æ–≤–ª–µ–Ω
- [ ] Firebase –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] Cloudinary –Ω–∞—Å—Ç—Ä–æ–µ–Ω
- [ ] npm run dev –∑–∞–ø—É—â–µ–Ω
- [ ] –ê–¥–º–∏–Ω–∫–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

---

**–ü–∞—Ä–æ–ª—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `admin123`

**–ü–æ—Ä—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:** `http://localhost:3000`
